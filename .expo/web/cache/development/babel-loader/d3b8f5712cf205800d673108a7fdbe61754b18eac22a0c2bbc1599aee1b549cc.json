{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useEffect, useState } from \"react\";\nimport History_Card from \"../../../Components/Vehicle_History/History_Card\";\nimport Api from \"../../../Api/Api\";\nimport { useSelector } from \"react-redux\";\nimport OwnStorage from \"../../../Api/StorageController\";\nimport Toast from \"react-native-root-toast\";\nimport GlobalColors from \"../../../Utils/GlobalColors\";\nimport GlobalStyles from \"../../../Utils/GlobalStyles\";\nimport moment from \"moment\";\nimport strings from \"../../../constants/lng/LocalizedStrings\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Route1 = function Route1() {\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    products = _useState2[0],\n    setproducts = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    routecheck = _useState4[0],\n    setroutecheck = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isapicall = _useState6[0],\n    setisapicall = _useState6[1];\n  var _useSelector = useSelector(function (state) {\n      return state.driverdetails;\n    }),\n    Profile = _useSelector.Profile;\n  var _useSelector2 = useSelector(function (state) {\n      return state.driverdetails;\n    }),\n    Filter_Dates = _useSelector2.Filter_Dates;\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    Route_Requests = _useState8[0],\n    setRoute_Request = _useState8[1];\n  var Localdata = new OwnStorage();\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"formatted date\", Filter_Dates);\n            getrouterequest();\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [Filter_Dates]);\n  var getrouterequest = function getrouterequest() {\n    setisapicall(true);\n    setroutecheck(true);\n    var Params = {};\n    Params.id = 0;\n    Params.route_id = 1;\n    var status = \"received\";\n    var path = Filter_Dates ? \"recycles?route_id=1&status=Completed&driver_id=\" + Profile.id + \"&created_at_from=\" + Filter_Dates + \"&created_at_to=\" + Filter_Dates + \"&limit=999999\" : \"recycles?route_id=1&status=Completed&driver_id=\" + Profile.id + \"&limit=999999\";\n    Api.request(\"get\", path).then(function (response) {\n      if (response.data == \"\" || response.data == undefined) {\n        setroutecheck(false);\n      } else {\n        setisapicall(false);\n        console.log(response.data);\n        setRoute_Request(response.data);\n      }\n    }).catch(function (error) {\n      setisapicall(false);\n      if (error.response.status == 401) {\n        Toast.show(\"You are Blocked by the Admin\");\n        navigation.navigate(\"Login\");\n      }\n      console.log(\"error\", error);\n      for (var _i = 0, _Object$entries = Object.entries(error.response.data.errors); _i < _Object$entries.length; _i++) {\n        var _ref = _Object$entries[_i];\n        var _ref2 = _slicedToArray(_ref, 2);\n        var key = _ref2[0];\n        var value = _ref2[1];\n        console.log(key + \": \" + value);\n        Toast.show(key + \": \" + value);\n      }\n    });\n  };\n  if (isapicall == true) {\n    if (routecheck) {\n      return _jsx(ActivityIndicator, {\n        style: {\n          flex: 1\n        },\n        size: \"large\",\n        color: GlobalColors.Green\n      });\n    } else {\n      return _jsx(View, {\n        style: {\n          flex: 1,\n          justifyContent: \"center\",\n          alignContent: \"center\",\n          alignItems: \"center\"\n        },\n        children: _jsxs(Text, {\n          style: GlobalStyles.HeaderText,\n          children: [strings.NOCOMPELTEDREQONROUT, \" 1\"]\n        })\n      });\n    }\n  } else {\n    return _jsxs(View, {\n      style: styles.Container,\n      children: [_jsxs(View, {\n        style: styles.Totalcustomer,\n        children: [_jsx(Text, {\n          style: styles.heading1,\n          children: strings.TOTALCUSTOMER\n        }), _jsx(Text, {\n          style: styles.heading2,\n          children: Route_Requests.length\n        })]\n      }), _jsx(ScrollView, {\n        children: _jsx(View, {\n          children: Route_Requests.map(renderitem)\n        })\n      })]\n    });\n  }\n};\nvar renderitem = function renderitem(item) {\n  var parsed = JSON.parse(item.schedule);\n  var maxDate = moment(item.created_at).format(\"YYYY-MM-DD\");\n  return _jsx(History_Card, {\n    Name: item.customer.first_name + \" \" + item.customer.last_name,\n    Datelabel: parsed.shift == \"Evening Slot\" ? maxDate + \" \" + \"at\" + \" \" + parsed.evening_start_time : maxDate + \" \" + \"at\" + \" \" + parsed.morning_start_time,\n    Addresslabel: item.address,\n    Statuslabel: \"pending\",\n    Item_Name: item.products,\n    item_res: item\n  }, item.id);\n};\nexport default Route1;\nvar styles = StyleSheet.create({\n  Container: {\n    flex: 1\n  },\n  Totalcustomer: {\n    paddingTop: \"2%\",\n    paddingLeft: \"5%\",\n    paddingRight: \"5%\",\n    flexDirection: \"row\",\n    paddingBottom: \"5%\",\n    justifyContent: \"space-between\"\n  },\n  heading1: {\n    fontSize: 16,\n    color: \"#51AB1D\",\n    fontFamily: \"Poppins_600SemiBold\"\n  },\n  heading2: {\n    fontSize: 14,\n    color: \"#6E6E6E\",\n    fontFamily: \"Poppins_600SemiBold\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","History_Card","Api","useSelector","OwnStorage","Toast","GlobalColors","GlobalStyles","moment","strings","jsx","_jsx","jsxs","_jsxs","Route1","_useState","_useState2","_slicedToArray","products","setproducts","_useState3","_useState4","routecheck","setroutecheck","_useState5","_useState6","isapicall","setisapicall","_useSelector","state","driverdetails","Profile","_useSelector2","Filter_Dates","_useState7","_useState8","Route_Requests","setRoute_Request","Localdata","_callee","_regeneratorRuntime","async","_callee$","_context","prev","next","console","log","getrouterequest","stop","Promise","Params","id","route_id","status","path","request","then","response","data","undefined","catch","error","show","navigation","navigate","_i","_Object$entries","Object","entries","errors","length","_ref","_ref2","key","value","ActivityIndicator","style","flex","size","color","Green","View","justifyContent","alignContent","alignItems","children","Text","HeaderText","NOCOMPELTEDREQONROUT","styles","Container","Totalcustomer","heading1","TOTALCUSTOMER","heading2","ScrollView","map","renderitem","item","parsed","JSON","parse","schedule","maxDate","created_at","format","Name","customer","first_name","last_name","Datelabel","shift","evening_start_time","morning_start_time","Addresslabel","address","Statuslabel","Item_Name","item_res","StyleSheet","create","paddingTop","paddingLeft","paddingRight","flexDirection","paddingBottom","fontSize","fontFamily"],"sources":["C:/Users/Ayamo/Downloads/driver-master/Screens/Home/Pickup_History/Route1.js"],"sourcesContent":["import {\n  ActivityIndicator,\n  ScrollView,\n  StyleSheet,\n  Text,\n  View,\n} from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport History_Card from \"../../../Components/Vehicle_History/History_Card\";\nimport Api from \"../../../Api/Api\";\nimport { useSelector } from \"react-redux\";\nimport OwnStorage from \"../../../Api/StorageController\";\nimport Toast from \"react-native-root-toast\";\nimport GlobalColors from \"../../../Utils/GlobalColors\";\nimport GlobalStyles from \"../../../Utils/GlobalStyles\";\nimport moment from \"moment\";\nimport strings from \"../../../constants/lng/LocalizedStrings\";\n\nconst Route1 = () => {\n  const [products, setproducts] = useState();\n  const [routecheck, setroutecheck] = useState(true);\n  const [isapicall, setisapicall] = useState(true);\n\n  const { Profile } = useSelector((state) => state.driverdetails);\n  const { Filter_Dates } = useSelector((state) => state.driverdetails);\n\n  const [Route_Requests, setRoute_Request] = useState([]);\n  var Localdata = new OwnStorage();\n  useEffect(async () => {\n    console.log(\"formatted date\", Filter_Dates);\n    getrouterequest();\n  }, [Filter_Dates]);\n  const getrouterequest = () => {\n    setisapicall(true);\n    setroutecheck(true);\n\n    let Params = {};\n    Params.id = 0;\n    Params.route_id = 1;\n    let status = \"received\";\n\n    let path = Filter_Dates\n      ? `recycles?route_id=1&status=Completed&driver_id=${Profile.id}&created_at_from=${Filter_Dates}&created_at_to=${Filter_Dates}&limit=999999`\n      : `recycles?route_id=1&status=Completed&driver_id=${Profile.id}&limit=999999`;\n    Api.request(\"get\", path)\n      .then((response) => {\n        if (response.data == \"\" || response.data == undefined) {\n          setroutecheck(false);\n        } else {\n          setisapicall(false);\n          console.log(response.data);\n\n          setRoute_Request(response.data);\n        }\n      })\n      .catch((error) => {\n        setisapicall(false);\n        if (error.response.status == 401) {\n          Toast.show(\"You are Blocked by the Admin\");\n          navigation.navigate(\"Login\");\n        }\n        console.log(\"error\", error);\n        for (const [key, value] of Object.entries(error.response.data.errors)) {\n          console.log(`${key}: ${value}`);\n          Toast.show(`${key}: ${value}`);\n        }\n      });\n  };\n  if (isapicall == true) {\n    if (routecheck) {\n      return (\n        <ActivityIndicator\n          style={{ flex: 1 }}\n          size=\"large\"\n          color={GlobalColors.Green}\n        ></ActivityIndicator>\n      );\n    } else {\n      return (\n        <View\n          style={{\n            flex: 1,\n            justifyContent: \"center\",\n            alignContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <Text style={GlobalStyles.HeaderText}>\n            {strings.NOCOMPELTEDREQONROUT} 1\n          </Text>\n        </View>\n      );\n    }\n  } else {\n    return (\n      <View style={styles.Container}>\n        <View style={styles.Totalcustomer}>\n          <Text style={styles.heading1}>{strings.TOTALCUSTOMER}</Text>\n          <Text style={styles.heading2}>{Route_Requests.length}</Text>\n        </View>\n        <ScrollView>\n          <View>{Route_Requests.map(renderitem)}</View>\n        </ScrollView>\n      </View>\n    );\n  }\n};\nconst renderitem = (item) => {\n  const parsed = JSON.parse(item.schedule);\n  const maxDate = moment(item.created_at).format(\"YYYY-MM-DD\");\n\n  return (\n    <History_Card\n      key={item.id}\n      Name={item.customer.first_name + \" \" + item.customer.last_name}\n      Datelabel={\n        parsed.shift == \"Evening Slot\"\n          ? maxDate + \" \" + \"at\" + \" \" + parsed.evening_start_time\n          : maxDate + \" \" + \"at\" + \" \" + parsed.morning_start_time\n      }\n      Addresslabel={item.address}\n      Statuslabel=\"pending\"\n      Item_Name={item.products}\n      item_res={item}\n    />\n  );\n};\nexport default Route1;\n\nconst styles = StyleSheet.create({\n  Container: {\n    flex: 1,\n  },\n  Totalcustomer: {\n    paddingTop: \"2%\",\n    paddingLeft: \"5%\",\n    paddingRight: \"5%\",\n    flexDirection: \"row\",\n    paddingBottom: \"5%\",\n    justifyContent: \"space-between\",\n  },\n  heading1: {\n    fontSize: 16,\n    color: \"#51AB1D\",\n    fontFamily: \"Poppins_600SemiBold\",\n  },\n  heading2: {\n    fontSize: 14,\n    color: \"#6E6E6E\",\n    fontFamily: \"Poppins_600SemiBold\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}